# 智能采集

智能采集是八爪鱼爬虫的核心功能之一，基于AI技术自动识别网页结构并提取数据，让数据采集变得前所未有的简单。

## 什么是智能采集？

智能采集使用机器学习算法自动分析网页的DOM结构，识别出可采集的数据字段，无需手动配置复杂的选择器和规则。只需右键点击页面，选择"智能采集"，插件就会自动完成数据提取。

### 核心优势

- **零配置**: 无需编写选择器或规则
- **快速启动**: 几秒钟即可开始采集
- **智能识别**: 自动识别标题、价格、图片等常见字段
- **自适应**: 适应不同网站的页面结构
- **可调整**: AI生成的规则可以手动优化

## 使用智能采集

### 方法一：右键菜单

1. **打开目标网页**
   - 在浏览器中访问要采集数据的页面
   - 例如：电商网站的商品列表页

2. **启动智能采集**
   - 在页面空白处右键点击
   - 选择"智能采集"菜单项
   - 或使用快捷键 `Ctrl+Shift+I` (Windows) / `Cmd+Shift+I` (Mac)

3. **AI分析页面**
   - 插件自动分析页面结构
   - 识别可采集的数据字段
   - 生成采集规则

4. **确认字段**
   - 查看AI识别的字段列表
   - 可以添加、删除或修改字段
   - 调整字段名称和类型

5. **开始采集**
   - 点击"开始采集"按钮
   - 实时查看采集进度
   - 采集完成后查看数据

### 方法二：插件面板

1. **打开插件**
   - 点击浏览器工具栏的插件图标
   - 进入主界面

2. **创建智能任务**
   - 点击"新建任务"
   - 选择"智能采集模式"
   - 输入目标网页URL

3. **配置和执行**
   - 插件自动打开目标页面
   - AI分析并生成规则
   - 确认后开始采集

## 智能识别的字段类型

智能采集可以自动识别以下常见字段类型：

### 文本字段

**标题类**
- 商品标题
- 文章标题
- 新闻标题
- 产品名称

**描述类**
- 商品描述
- 文章摘要
- 简介信息
- 详细说明

**分类标签**
- 商品分类
- 文章标签
- 关键词
- 品牌信息

### 数值字段

**价格类**
- 当前价格
- 原价
- 折扣价
- 会员价

**数量类**
- 库存数量
- 销量
- 评论数
- 浏览量

**评分类**
- 商品评分
- 用户评分
- 星级评价

### 链接字段

**页面链接**
- 详情页链接
- 商品链接
- 文章链接
- 下载链接

**图片链接**
- 主图
- 缩略图
- 详情图
- 轮播图

### 时间字段

**发布时间**
- 文章发布时间
- 商品上架时间
- 评论时间
- 更新时间

**格式识别**
- 相对时间（如"2小时前"）
- 绝对时间（如"2024-01-01"）
- 自动转换为标准格式

### 结构化数据

**列表数据**
- 商品规格
- 属性参数
- 标签列表
- 选项列表

**表格数据**
- 参数表格
- 价格表格
- 对比表格

## 智能采集示例

### 示例1：电商商品列表

**目标页面**: 电商网站商品列表页

**AI自动识别的字段**:
```
✓ 商品标题 (title)
✓ 价格 (price)
✓ 原价 (originalPrice)
✓ 商品图片 (image)
✓ 详情链接 (detailUrl)
✓ 销量 (sales)
✓ 评分 (rating)
✓ 店铺名称 (shopName)
```

**采集结果**:
```json
[
  {
    "title": "Apple iPhone 15 Pro Max",
    "price": "9999",
    "originalPrice": "10999",
    "image": "https://example.com/img/iphone.jpg",
    "detailUrl": "https://example.com/product/123",
    "sales": "10000+",
    "rating": "4.9",
    "shopName": "Apple官方旗舰店"
  }
]
```

### 示例2：新闻文章列表

**目标页面**: 新闻网站首页

**AI自动识别的字段**:
```
✓ 文章标题 (title)
✓ 摘要 (summary)
✓ 作者 (author)
✓ 发布时间 (publishTime)
✓ 文章链接 (articleUrl)
✓ 封面图片 (coverImage)
✓ 分类 (category)
✓ 阅读量 (views)
```

**采集结果**:
```json
[
  {
    "title": "科技新闻标题",
    "summary": "这是文章摘要内容...",
    "author": "张三",
    "publishTime": "2024-01-15 10:30:00",
    "articleUrl": "https://news.example.com/article/456",
    "coverImage": "https://news.example.com/img/cover.jpg",
    "category": "科技",
    "views": "1.2万"
  }
]
```

### 示例3：招聘信息

**目标页面**: 招聘网站职位列表

**AI自动识别的字段**:
```
✓ 职位名称 (jobTitle)
✓ 公司名称 (companyName)
✓ 薪资范围 (salary)
✓ 工作地点 (location)
✓ 工作经验 (experience)
✓ 学历要求 (education)
✓ 职位链接 (jobUrl)
✓ 发布时间 (postTime)
```

## 调整智能采集结果

虽然AI可以自动识别大部分字段，但有时需要手动调整以获得更好的结果。

### 添加字段

如果AI遗漏了某些字段：

1. 点击"添加字段"按钮
2. 在页面上点击要采集的元素
3. 输入字段名称
4. 选择数据类型
5. 保存字段配置

### 删除字段

如果AI识别了不需要的字段：

1. 在字段列表中找到该字段
2. 点击字段右侧的删除图标
3. 确认删除

### 修改字段

调整字段的配置：

1. 点击字段进入编辑模式
2. 修改字段名称
3. 调整选择器（如果需要）
4. 更改数据类型
5. 配置数据处理规则
6. 保存修改

### 字段重命名

```
原字段名: price_text
↓ 修改为
新字段名: price
```

### 数据类型转换

```
原类型: 文本 "¥199.99"
↓ 转换为
新类型: 数字 199.99
```

## 智能翻页

智能采集不仅能识别数据字段，还能自动识别翻页方式。

### 自动识别翻页类型

**数字分页**
```html
<div class="pagination">
  <a>1</a>
  <a>2</a>
  <a class="next">下一页</a>
</div>
```
AI识别: 点击"下一页"按钮

**无限滚动**
```javascript
// 页面滚动到底部自动加载
window.addEventListener('scroll', loadMore)
```
AI识别: 滚动到底部触发

**加载更多按钮**
```html
<button class="load-more">加载更多</button>
```
AI识别: 点击"加载更多"按钮

### 配置翻页参数

**最大页数**
```
设置: 采集前10页
结果: 自动停止在第10页
```

**最大数据量**
```
设置: 采集1000条数据
结果: 达到1000条后停止
```

**翻页间隔**
```
设置: 每页间隔2秒
目的: 避免请求过快被封禁
```

## 智能深度采集

对于需要进入详情页采集更多信息的场景，智能采集也能自动处理。

### 自动识别详情链接

AI会自动识别列表中的详情页链接：

```
列表页识别:
✓ 商品标题链接
✓ "查看详情"按钮
✓ 商品图片链接
```

### 详情页字段识别

进入详情页后，AI继续识别更多字段：

```
详情页额外字段:
✓ 详细描述
✓ 商品参数
✓ 用户评论
✓ 更多图片
```

### 数据合并

列表页和详情页的数据自动合并：

```json
{
  // 列表页数据
  "title": "商品标题",
  "price": "199.99",
  
  // 详情页数据
  "description": "详细描述...",
  "specifications": {
    "brand": "品牌名",
    "model": "型号"
  }
}
```

## 智能数据清洗

AI不仅识别数据，还会自动清洗数据。

### 价格清洗

```
原始数据: "¥199.99元"
清洗后: "199.99"

原始数据: "$1,999.00"
清洗后: "1999.00"
```

### 数字清洗

```
原始数据: "销量: 10000+"
清洗后: "10000"

原始数据: "1.2万"
清洗后: "12000"
```

### 时间清洗

```
原始数据: "2小时前"
清洗后: "2024-01-15 14:30:00"

原始数据: "昨天 15:30"
清洗后: "2024-01-14 15:30:00"
```

### 文本清洗

```
原始数据: "  标题文本  \n\n"
清洗后: "标题文本"

原始数据: "标题<span>标签</span>"
清洗后: "标题标签"
```

## 智能采集的限制

虽然智能采集很强大，但也有一些限制：

### 适用场景

✅ **适合**:
- 结构化的列表页面
- 标准的详情页面
- 常见的电商、新闻网站
- 规范的HTML结构

❌ **不适合**:
- 高度定制化的页面
- 复杂的单页应用(SPA)
- 需要复杂交互的页面
- 非标准的数据结构

### 识别准确率

- **高准确率** (>90%): 电商商品、新闻文章、招聘信息
- **中等准确率** (70-90%): 社交媒体、论坛帖子
- **低准确率** (<70%): 高度定制化页面、复杂表格

### 性能考虑

- AI分析需要几秒钟时间
- 复杂页面可能需要更长时间
- 建议先在小范围测试

## 从智能采集到可视化规则

智能采集生成的规则可以转换为可视化规则，进行更精细的调整：

1. **完成智能采集**
   - 使用智能采集创建初始规则

2. **转换为可视化规则**
   - 点击"转换为高级规则"
   - 进入可视化编辑器

3. **精细调整**
   - 修改选择器
   - 添加数据处理逻辑
   - 配置复杂的翻页规则
   - 添加条件判断

4. **保存和复用**
   - 保存为规则模板
   - 用于类似网站的采集

## 最佳实践

### 1. 选择合适的页面

✅ **推荐**:
- 选择数据完整的页面
- 确保页面已完全加载
- 避免弹窗和广告干扰

### 2. 验证采集结果

✅ **推荐**:
- 先采集少量数据测试
- 检查字段是否正确
- 验证数据完整性
- 确认数据格式

### 3. 处理特殊情况

✅ **推荐**:
- 对于登录页面，先手动登录
- 对于动态加载，等待内容加载完成
- 对于验证码，手动完成验证

### 4. 优化采集性能

✅ **推荐**:
- 只采集必要的字段
- 设置合理的翻页间隔
- 使用增量采集避免重复
- 定期清理历史数据

## 故障排除

### 问题1: AI识别不到字段

**可能原因**:
- 页面结构不规范
- 内容动态加载
- 元素被隐藏

**解决方法**:
1. 等待页面完全加载
2. 滚动页面触发内容加载
3. 手动添加遗漏的字段
4. 转换为可视化规则手动配置

### 问题2: 识别的字段不准确

**可能原因**:
- 页面包含广告或推荐内容
- 多种数据结构混合
- 字段命名不规范

**解决方法**:
1. 删除不需要的字段
2. 修改字段选择器
3. 调整数据提取规则
4. 使用数据过滤

### 问题3: 采集数据不完整

**可能原因**:
- 翻页识别错误
- 数据动态加载
- 网络请求失败

**解决方法**:
1. 检查翻页配置
2. 增加等待时间
3. 手动配置翻页规则
4. 查看错误日志

## 下一步

- [可视化规则开发](./visual-rule-development) - 创建更复杂的采集规则
- [数据导出](./data-export) - 了解如何导出采集的数据
- [定时任务](./scheduled-tasks) - 设置自动化采集任务
- [实战教程](./tutorials) - 通过实例学习数据采集
